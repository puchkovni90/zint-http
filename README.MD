### HTTP-сервис генерации штрихкодов на основе Zint

---

#### **Основные возможности**
1. Совместимость с [Zint Command Line](https://www.zint.org.uk/manual/chapter/4)
2. Поддержка всех параметров и типов штрихкодов Zint
3. Два режима работы:
   - Одиночная генерация (`/generate`)
   - Пакетная генерация (`/generate_batch`)

---

### **Эндпоинты**

#### 1. Генерация одного штрихкода
`GET|POST /generate`

**Параметры:**
- Любые параметры из документации Zint
- Обязательные: `type`, `data`
- Формат: `filetype` (по умолчанию PNG)

**Особенности:**
- GET: параметры передаются в query string
- POST: параметры передаются в JSON-теле
- Булевы флаги в GET: без значения (`&gs1&`)

**Примеры:**
```bash
# GET-запрос (GS1 DataMatrix)
curl -o barcode.svg "http://localhost:5000/generate?type=71&filetype=svg&data=[01]04680842111339[21]1234567890123[91]EE11[92]123456789012345678901234567890123456789012345678901234&gs1"

# POST-запрос
curl -X POST http://localhost:5000/generate \
  -H "Content-Type: application/json" \
  -d '{
    "type": 71,
    "filetype": "eps",
    "scale": 2,
    "gs1": true,
    "data": "[01]04680842111339[21]1234567890123[91]EE11[92]123456789012345678901234567890123456789012345678901234"
  }' \
  --output barcode.eps
```

#### 2. Пакетная генерация
`POST /generate_batch`

**Формат запроса:**
```json
{
  "common": {
    "type": 71,
    "filetype": "png",
    "scale": 2,
    "border": 2,
    "gs1": true
  },
  "items": [
    "Данные для кода 1",
    "Данные для кода 2"
  ]
}
```

**Пример:**
```bash
curl -X POST http://localhost:5000/generate_batch \
  -H "Content-Type: application/json" \
  -d '{
    "common": {
      "type": 71,
      "filetype": "png",
      "scale": 2,
      "border": 2,
      "gs1": true
    },
    "items": [
      "[01]04680842111339[21]1234567890123[91]EE11[92]123456789012345678901234567890123456789012345678901234",
      "[01]04680842111339[21]1234567890123[91]EE11[92]1234567890123456789012345678901234567890123456789012345"
    ]
  }' \
  --output batch.zip
```

#### 3. Проверка работоспособности
`GET /health`
```json
{"status":"ok","zint":"/usr/bin/zint"}
```

---

### **Популярные типы штрихкодов**
| Код | Название          | Пример параметров               |
|-----|-------------------|---------------------------------|
| 58  | QR-код           | `?type=58&data=HelloWorld`      |
| 71  | GS1 DataMatrix   | `?type=71&gs1&data=[01]...`     |
| 20  | Code 128         | `?type=20&data=123456`          |
| 8   | EAN-13           | `?type=8&data=123456789012`     |
| 34  | PDF417           | `?type=34&data=PDF417Sample`    |

---

### **Ключевые особенности**
1. **Поддержка параметров Zint**  
   Параметры из [документации Zint](https://www.zint.org.uk/manual/chapter/4) могут быть переданы в запросе.

2. **Форматы вывода**  
   Поддерживаются все форматы Zint:  
   `PNG`, `SVG`, `EPS`, `GIF`, `TIF`, `BMP`, `PCX`, `TXT`

---

### **Обработка ошибок**
При ошибке возвращается JSON:
```json
{
  "error": "Описание",
  "details": "Техническая информация"
}
```

**Коды статусов:**
- 200: Успех
- 400: Неверный запрос
- 500: Ошибка генерации

---

### **Запуск через Docker**
```bash
docker build -t zint-http .
docker run -d -p 5000:5000 --name zint-server zint-http
```

---

> Сервис является тонкой оберткой над Zint CLI.  
> Для сложных сценариев обратитесь к [официальной документации Zint](https://www.zint.org.uk/manual/).  
> Поддерживается генерация 300+ типов штрихкодов.
